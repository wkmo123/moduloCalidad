<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Plantilla</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>

<body>
    <div class="container mt-4">
        <h2>Plantilla</h2>
        <form id="plantilla1" action="/guardar" method="post">
            <div class="mb-3">
                <label for="moduloId" class="form-label">Módulo:</label>
                <select class="form-select" id="moduloId" name="moduloId" required>
                    <option value="">Selecciona un módulo</option>
                    <th:block th:each="modulo : ${modulos}">
                        <option th:value="${modulo.id}" th:text="${modulo.modulo}"></option>
                    </th:block>
                </select>
            </div>
            <div class="mb-3">
                <label for="nombre_proceso" class="form-label">Nombre del Proceso:</label>
                <input type="text" class="form-control" id="nombre_proceso" name="nombre_proceso" required>
            </div>
            <div class="mb-3">
                <label for="fecha" class="form-label">Fecha:</label>
                <input type="date" class="form-control" id="fecha" name="fecha" required>
            </div>
            <button type="submit" class="btn btn-primary" name="submit1">Siguiente</button>
            

        </form>
        <!-- 
        <form id="formulario2" action="/guardar2">

           
            <button type="submit" class="btn btn-primary" name="submit2">Guardar</button>
        </form>
        -->
    </div>
    <!-- 
    <script
        
    
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-lZEjGR5U5vqWTPFK6TA8pnp5f5cyfJFMCkz5qNcPjz3L78n5C5f5O5p5v5u5F5i5f5"
        crossorigin="anonymous"></script>

    <script>
        function mostrarFormulario1() {
            document.getElementById("formulario1").style.display = "block";
            document.getElementById("formulario2").style.display = "none";

        }

        function mostrarFormulario2() {
            document.getElementById("formulario1").style.display = "none";
            document.getElementById("formulario2").style.display = "block";
        }

        window.onload = function ocultarSegundoFormulario() {
            document.getElementById("formulario2").style.display = "none";
        }

        document.getElementById("formulario1").addEventListener("submit", function (e) {
            e.preventDefault(); // Evita la recarga de la página
            var formData = new FormData(this);
            formData.append("submit", "1"); // Indica que se envió el formulario 1
            enviarFormulario(formData);
        });

        document.getElementById("formulario2").addEventListener("submit", function (e) {
            e.preventDefault(); // Evita la recarga de la página
            var formData = new FormData(this);
            formData.append("submit", "2"); // Indica que se envió el formulario 2
            enviarFormulario(formData);
        });

        function enviarFormulario(formData) {
            // Realiza una solicitud AJAX para enviar el formulario
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/guardar", true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // Respuesta exitosa, puedes manejarla aquí si es necesario
                    mostrarFormulario2(); // Muestra el formulario 2 después de enviar
                }
            };
            xhr.send(formData);
        }
    </script>
     -->
</body>

</html>